<script>

    function getNode(node) {
        return document.querySelector(node)
    }

    function getTildaNode([value, type], rec) {
		switch(type) {
			case 'text':
				return getNode(`#rec${rec} .tn-elem[data-elem-id="${value}"] .tn-atom`)
				break
			case 'image':
				return getNode(`#rec${rec} .tn-elem[data-elem-id="${value}"] .tn-atom .tn-atom__img`)
				break
			case 'gallery':
				return getNode(`#rec${rec} .tn-elem[data-elem-id="${value}"] .tn-atom__gallery .t-slds`)
				break
			default:
				return getNode(`#rec${rec} .tn-elem[data-elem-id="${value}"]`)
				break
		}
	}

    // нахождение айди узла одним кликом ЛКМ + ctrl
    
    document.onclick = (e) => {
        
        if(e.ctrlKey) {
            // let a = e.target.attributes.field || e.target.attributes.imgfield,
            //     path = e.path || e.composedPath(),
            //     index = path.findIndex(item => item.dataset?.elemType === 'gallery' ? true : false)
                
            // // console.log(index)
            
            // if(index !== -1 && a !== undefined) console.log(`data-elem-id="${path[index].attributes["data-elem-id"].nodeValue}"`)
            // else console.log(a.value)
            
            let path = e.path || e.composedPath(),
            rec = path[path.findIndex(item => item.id.includes('rec'))],
            tI = path.findIndex(item => item?.attributes?.hasOwnProperty('data-elem-id'))
            
            if(tI !== -1) {
                
                let target = path[tI],
                    elemId = target.dataset.elemId
                    
                console.log([elemId, target.dataset.elemType])
            }
            
            else console.log(`On click in place not exist node with attribute 'data-elem-id'`)
            
        }
        
       // нахождение айди блока одним кликом ЛКМ
        
        else {
            let path = e.path || e.composedPath(),
            rec = path[path.findIndex(item => item.id.includes('rec'))]
            
            console.log(rec.id)    
        }
    }
    
</script>
